spring:
  config:
    activate:
      on-profile: test

#  ai:
#    version: "1.1.0-M3"
#    model:
#      chat: ollama
#    ollama:
#      base-url: http://localhost:11434   # doesn’t matter if mocked
#      chat:
#        options:
#          model: llava:latest
#          temperature: 0.2
#      init:
#        pull-model-strategy: always
#        timeout: 60s
#        max-retries: 1

  datasource:
#    url: jdbc:tc:pgvector/pgvector:pg18:///ai-art-test?TC_TMPFS=/testtmpfs:rw
    # jdbc:tc:postgres:18:///ai-art-test → tells Testcontainers to start a PostgreSQL 18 container
    # ?TC_IMAGE=pgvector/pgvector:pg18 → overrides the default image to use pgvector
    # ai-art-test → your database name inside the container
    url: jdbc:tc:postgresql:18:///ai-art-test?TC_IMAGE=pgvector/pgvector:pg18
    driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver
    username: ai-art-test
    password: secret
    hikari:
      maximum-pool-size: 2

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        type:
          descriptor.sql.BasicBinder: TRACE

  sql:
    init:
      mode: always
      continue-on-error: true

  test:
    database:
      replace: none

  flyway:
    enabled: true  # if using Flyway
    locations: classpath:db/migration
    baseline-on-migrate: true

logging:
  level:
    root: info
    org.springframework: info
    # log SQL with binding parameter values
    org.hibernate.SQL: debug
    org.hibernate.orm.jdbc.bind: trace
    com.zaxxer.hikari.HikariConfig: debug
    com.zaxxer.hikari: trace
    org.flywaydb: debug
    org.testcontainers: debug
    # application
    com.giri.aiart: debug

minio:
  endpoint: ${MINIO_URL:http://127.0.0.1:9000}
  access-key: ${MINIO_ACCESS_KEY:minioadmin}
  secret-key: ${MINIO_SECRET_KEY:minioadmin}
  bucket-name: ${MINIO_BUCKET_NAME:test-ai-art}
  secure: ${MINIO_SECURE:false}
